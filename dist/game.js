//>>built
(function(b,c){var f,j,g,i=function(){},d=function(a){for(var e in a)return 0;return 1},k={}.toString,l=function(a){return"[object Function]"==k.call(a)},a=function(a){return"[object String]"==k.call(a)},e=function(a){return"[object Array]"==k.call(a)},h=function(a,e){if(a)for(var b=0;b<a.length;)e(a[b++])},m=function(a,e){for(var b in e)a[b]=e[b];return a},o=function(a,e){return m(Error(a),{src:"dojoLoader",info:e})},t=1,u=function(){return"_"+t++},n=function(a,e,b){return ha(a,e,b,0,n)},A=this,
B=A.document,ya=B&&B.createElement("DiV"),r=n.has=function(a){return l(p[a])?p[a]=p[a](A,B,ya):p[a]},p=r.cache=c.hasCache;r.add=function(a,e,b,h){(void 0===p[a]||h)&&(p[a]=e);return b&&r(a)};for(var q in b.has)r.add(q,b.has[q],0,1);n.async=1;var w=new Function("return eval(arguments[0]);");n.eval=function(a,e){return w(a+"\r\n////@ sourceURL="+e)};var v={},s=n.signal=function(a,b){var o=v[a];h(o&&o.slice(0),function(a){a.apply(null,e(b)?b:[b])})},H=n.on=function(a,e){var b=v[a]||(v[a]=[]);b.push(e);
return{remove:function(){for(var a=0;a<b.length;a++)if(b[a]===e){b.splice(a,1);break}}}},ia=[],za={},ja=[],T={},ka=n.map={},I=[],x={},U="",D={},J={};q={};var L=function(a){var e,b,h,o;for(e in J)b=J[e],(h=e.match(/^url\:(.+)/))?D["url:"+la(h[1],a)]=b:"*now"==e?o=b:"*noref"!=e&&(h=K(e,a),D[h.mid]=D["url:"+h.url]=b);o&&o(V(a));J={}},ma=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},W=function(a,e){e.splice(0,e.length);for(var b in a)e.push([b,a[b],RegExp("^"+
ma(b)+"(/|$)"),b.length]);e.sort(function(a,e){return e[3]-a[3]});return e},na=function(a){var e=a.name;e||(e=a,a={name:e});a=m({main:"main"},a);a.location=a.location?a.location:e;if(a.packageMap)ka[e]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);T[e]=a},oa=[],F=function(e,b,o){for(var d in e){if("waitSeconds"==d)n.waitms=1E3*(e[d]||0);"cacheBust"==d&&(U=e[d]?a(e[d])?e[d]:(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)n[d]=e[d];e[d]!==p&&(n.rawConfig[d]=e[d],"has"!=d&&
r.add("config-"+d,e[d],0,b))}if(!n.baseUrl)n.baseUrl="./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(d in e.has)r.add(d,e.has[d],0,b);h(e.packages,na);for(g in e.packagePaths)h(e.packagePaths[g],function(e){var b=g+"/"+e;a(e)&&(e={name:e});e.location=b;na(e)});W(m(ka,e.map),I);h(I,function(a){a[1]=W(a[1],[]);if("*"==a[0])I.star=a});W(m(za,e.paths),ja);h(e.aliases,function(e){a(e[0])&&(e[0]=RegExp("^"+ma(e[0])+"$"));ia.push(e)});if(b)oa.push({config:e.config});else for(d in e.config)b=C(d,o),b.config=
m(b.config||{},e.config[d]);if(e.cache)L(),J=e.cache,e.cache["*noref"]&&L();s("config",[e,n.rawConfig])};n.rawConfig={};F(c,1);F(b,1);F(q,1);var M=function(a){X(function(){h(a.deps,pa)})},ha=function(b,h,d,c,f){var g;if(a(b)){if((g=C(b,c,!0))&&g.executed)return g.result;throw o("undefinedModule",b);}e(b)||(F(b,0,c),b=h,h=d);if(e(b))if(b.length){for(var d="require*"+u(),k,t=[],j=0;j<b.length;)k=b[j++],t.push(C(k,c));g=m(N("",d,0,""),{injected:2,deps:t,def:h||i,require:c?c.require:n,gc:1});x[g.mid]=
g;M(g);var l=G&&0!="sync";X(function(){Y(g,l)});g.executed||z.push(g);O()}else h&&h();return f},V=function(a){if(!a)return n;var e=a.require;if(!e)e=function(b,h,d){return ha(b,h,d,a,e)},a.require=m(e,n),e.module=a,e.toUrl=function(e){return la(e,a)},e.toAbsMid=function(e){return Z(e,a)};return e},z=[],P=[],y={},Ba=function(a){a.injected=1;y[a.mid]=1;a.url&&(y[a.url]=a.pack||1);Aa()},Q=function(a){a.injected=2;delete y[a.mid];a.url&&delete y[a.url];d(y)&&Ca()},Da=n.idle=function(){return!P.length&&
d(y)&&!z.length&&!G},$=function(a,e){if(e)for(var b=0;b<e.length;b++)if(e[b][2].test(a))return e[b];return 0},qa=function(a){for(var e=[],b,h,a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&e.length&&".."!=h?(e.pop(),h=e[e.length-1]):"."!=b&&e.push(h=b);return e.join("/")},N=function(a,e,b,h){return{pid:a,mid:e,pack:b,url:h,executed:0,def:0}},ra=function(a,e,b,d,c,i,m,g){var k,t,j,n;n=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||n&&!e)return N(0,a,0,a);a=qa(n?e.mid+"/../"+a:a);
if(/^\./.test(a))throw o("irrationalPath",a);e&&(j=$(e.mid,i));(j=(j=j||i.star)&&$(a,j[1]))&&(a=j[1]+a.substring(j[3]));e=(f=a.match(/^([^\/]+)(\/(.+))?$/))?f[1]:"";(k=b[e])?a=e+"/"+(t=f[3]||k.main):e="";var u=0;h(ia,function(e){var b=a.match(e[0]);b&&0<b.length&&(u=l(e[1])?a.replace(e[0],e[1]):e[1])});if(u)return ra(u,0,b,d,c,i,m,g);if(b=d[a])return g?N(b.pid,b.mid,b.pack,b.url):d[a];d=(j=$(a,m))?j[1]+a.substring(j[3]):e?k.location+"/"+t:a;/(^\/)|(\:)/.test(d)||(d=c+d);return N(e,a,k,qa(d+".js"))},
K=function(a,e){return ra(a,e,T,x,n.baseUrl,I,ja)},sa=function(a,e,b){return a.normalize?a.normalize(e,function(a){return Z(a,b)}):Z(e,b)},ta=0,C=function(a,e,b){var h,d;(h=a.match(/^(.+?)\!(.*)$/))?(d=C(h[1],e,b),5===d.executed&&!d.load&&aa(d),d.load?(h=sa(d,h[2],e),a=d.mid+"!"+(d.dynamic?++ta+"!":"")+h):(h=h[2],a=d.mid+"!"+ ++ta+"!waitingForPlugin"),a={plugin:d,mid:a,req:V(e),prid:h}):a=K(a,e);return x[a.mid]||!b&&(x[a.mid]=a)},Z=n.toAbsMid=function(a,e){return K(a,e).mid},la=n.toUrl=function(a,
e){var b=K(a+"/x",e),h=b.url;return ua(0===b.pid?a:h.substring(0,h.length-5))},va={injected:2,executed:5,def:3,result:3},E=function(a){return x[a]=m({mid:a},va)},Ea=E("require"),Fa=E("exports"),Ga=E("module"),R={},ba=0,aa=function(a){var e=a.result;a.dynamic=e.dynamic;a.normalize=e.normalize;a.load=e.load;return a},Ha=function(a){var e={};h(a.loadQ,function(b){var h=sa(a,b.prid,b.req.module),d=a.dynamic?b.mid.replace(/waitingForPlugin$/,h):a.mid+"!"+h,h=m(m({},b),{mid:d,prid:h,injected:0});x[d]||
wa(x[d]=h);e[b.mid]=x[d];Q(b);delete x[b.mid]});a.loadQ=0;var b=function(a){for(var b=a.deps||[],h=0;h<b.length;h++)(a=e[b[h].mid])&&(b[h]=a)},d;for(d in x)b(x[d]);h(z,b)},ca=function(a){n.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=ba++;a.loadQ&&(aa(a),Ha(a));for(j=0;j<z.length;)z[j]===a?z.splice(j,1):j++;/^require\*/.test(a.mid)&&delete x[a.mid]},Ia=[],Y=function(a,e){if(4===a.executed)return n.trace("loader-circular-dependency",[Ia.concat(a.mid).join("->")]),!a.def||e?R:a.cjs&&
a.cjs.exports;if(!a.executed){if(!a.def)return R;var b=a.mid,h=a.deps||[],d,o=[],c=0;for(a.executed=4;c<h.length;){d=h[c++];d=d===Ea?V(a):d===Fa?a.cjs.exports:d===Ga?a.cjs:Y(d,e);if(d===R)return a.executed=0,n.trace("loader-exec-module",["abort",b]),R;o.push(d)}n.trace("loader-run-factory",[a.mid]);b=a.def;o=l(b)?b.apply(null,o):b;a.result=void 0===o&&a.cjs?a.cjs.exports:o;ca(a)}return a.result},G=0,X=function(a){try{G++,a()}finally{G--}Da()&&s("idle",[])},O=function(){G||X(function(){for(var a,e,
b=0;b<z.length;)a=ba,e=z[b],Y(e),a!=ba?b=0:b++})};void 0===r("dojo-loader-eval-hint-url")&&r.add("dojo-loader-eval-hint-url",1);var ua=function(a){a+="";return a+(U?(/\?/.test(a)?"&":"?")+U:"")},wa=function(a){var e=a.plugin;5===e.executed&&!e.load&&aa(e);var b=function(e){a.result=e;Q(a);ca(a);O()};e.load?e.load(a.prid,a.req,b):e.loadQ?e.loadQ.push(a):(e.loadQ=[a],z.unshift(e),pa(e))},S=0,da=0,ea=0,Ja=function(a,e){r("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));ea=1;a===S?S.call(null):
n.eval(a,r("dojo-loader-eval-hint-url")?e.url:e.mid);ea=0},pa=function(a){var e=a.mid,b=a.url;if(!a.executed&&!a.injected&&!(y[e]||a.url&&(a.pack&&y[a.url]===a.pack||1==y[a.url])))if(Ba(a),a.plugin)wa(a);else{var h=function(){Ka(a);2!==a.injected&&(Q(a),m(a,va),n.trace("loader-define-nonmodule",[a.url]));O()};(S=D[e]||D["url:"+a.url])?(n.trace("loader-inject",["cache",a.mid,b]),Ja(S,a),h()):(n.trace("loader-inject",["script",a.mid,b]),da=a,n.injectUrl(ua(b),h,a),da=0)}},fa=function(a,e,b){n.trace("loader-define-module",
[a.mid,e]);if(2===a.injected)return s("error",o("multipleDefine",a)),a;m(a,{deps:e,def:b,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(e){a.cjs.exports=e},config:function(){return a.config}}});for(var h=0;h<e.length;h++)e[h]=C(e[h],a);Q(a);if(!l(b)&&!e.length)a.result=b,ca(a);return a},Ka=function(a,e){for(var b=[],d,o;P.length;)o=P.shift(),e&&(o[0]=e.shift()),d=o[0]&&C(o[0])||a,b.push([d,o[1],o[2]]);L(a);h(b,function(a){M(fa.apply(null,a))})},Ca=i,Aa=i;r.add("ie-event-behavior",
!!B.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ga=function(a,e,b,h){if(r("ie-event-behavior"))return a.attachEvent(b,h),function(){a.detachEvent(b,h)};a.addEventListener(e,h,!1);return function(){a.removeEventListener(e,h,!1)}},La=ga(window,"load","onload",function(){n.pageLoaded=1;"complete"!=B.readyState&&(B.readyState="complete");La()}),xa=B.getElementsByTagName("script")[0],Ma=xa.parentNode;n.injectUrl=function(a,e,b){var b=b.node=B.createElement("script"),
h=ga(b,"load","onreadystatechange",function(a){var a=a||window.event,b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))h(),d(),e&&e()}),d=ga(b,"error","onerror",function(e){h();d();s("error",o("scriptError",[a,e]))});b.type="text/javascript";b.charset="utf-8";b.src=a;Ma.insertBefore(b,xa);return b};n.log=i;n.trace=i;E=function(e,b,h){var d=arguments.length,c=["require","exports","module"],i=[0,e,b];1==d?i=[0,l(e)?c:[],e]:2==d&&a(e)?i=[e,l(b)?c:[],b]:3==d&&(i=[e,b,h]);
n.trace("loader-define",i.slice(0,2));if((d=i[0]&&C(i[0]))&&!y[d.mid])M(fa(d,i[1],i[2]));else if(!r("ie-event-behavior")||ea)P.push(i);else{d=d||da;if(!d)for(e in y)if((c=x[e])&&c.node&&"interactive"===c.node.readyState){d=c;break}d?(L(d),M(fa(d,i[1],i[2]))):s("error",o("ieDefineFailed",i[0]));O()}};E.amd={vendor:"dojotoolkit.org"};m(m(n,c.loaderPatch),b.loaderPatch);H("error",function(a){try{if(console.error(a),a instanceof Error)for(var e in a);}catch(b){}});m(n,{uid:u,cache:D,packs:T});if(!A.define)A.define=
E,A.require=n,h(oa,function(a){F(a)}),H=q.deps||b.deps||c.deps,q=q.callback||b.callback||c.callback,n.boot=H||q?[H||[],q]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen-dev-boilerplate",name:"frozen-dev-boilerplate"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",
name:"frozen"},{location:"../game",main:"game",name:"game"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("./update,./draw,./Head,./entities,dojo/keys,frozen/utils/radiansFromCenter,frozen/utils/scalePoints,frozen/box2d/BoxGame,frozen/box2d/RectangleEntity,frozen/box2d/CircleEntity,frozen/box2d/PolygonEntity,frozen/box2d/joints/Revolute".split(","),function(b,c,f,j,g,i,d,k,l,a,e,h){var m=new k({canvasId:"canvas",gameAreaId:"gameArea",canvasPercentage:0.95,height:600,width:800,update:b,draw:c,initInput:function(a){a.addKeyAction(g.LEFT_ARROW);
a.addKeyAction(g.RIGHT_ARROW);a.addKeyAction(g.UP_ARROW);a.addKeyAction(g.DOWN_ARROW);a.addKeyAction("A");a.addKeyAction("D")},handleInput:function(a){a.keyActions[g.LEFT_ARROW].isPressed()&&this.box.applyImpulseDegrees("torso",270,10);a.keyActions[g.RIGHT_ARROW].isPressed()&&this.box.applyImpulseDegrees("torso",90,10);a.keyActions[g.UP_ARROW].isPressed()&&this.box.applyImpulseDegrees("torso",0,10);a.keyActions.A.isPressed()&&this.box.applyTorque("torso",-1E3);a.keyActions.D.isPressed()&&this.box.applyTorque("torso",
1E3);a.touchAction.isPressed()?this.box.applyImpulse("torso",i(this.entities.torso,d(a.touchAction.position,1/this.box.scale)),10):a.mouseAction.isPressed()&&this.box.applyImpulse("torso",i(this.entities.torso,d(a.mouseAction.position,1/this.box.scale)),10)}});j.entities.forEach(function(b){var h;"head"===b.id?h=new f(b):"Rectangle"===b.type?h=new l(b):"Circle"===b.type?h=new a(b):"Polygon"===b.type&&(h=new e(b));h&&(m.box.addBody(h),m.entities[h.id]=h)});j.joints.forEach(function(a){var e;"Revolute"===
a.type&&(e=new h(a));e&&m.box.addJoint(e)});m.run()})},"game/update":function(){define([],function(){return function(){}})},"game/draw":function(){define([],function(){return function(b){b.fillStyle="#AAA";b.fillRect(0,0,this.width,this.height);for(var c in this.entities)this.entities[c].draw(b)}})},"game/Head":function(){define(["dcl","dcl/bases/Mixer","frozen/box2d/CircleEntity","frozen/plugins/loadImage!images/head.png"],function(b,c,f,j){return b([c,f],{draw:b.superCall(function(){return function(b,
i){i=i||this.scale||1;b.save();b.translate(this.x*i,this.y*i);b.rotate(this.angle);b.translate(-this.x*i,-this.y*i);b.drawImage(j,this.x*i-j.width/2,this.y*i-j.height/2);b.restore()}})})})},"dcl/dcl":function(){(function(b){"undefined"!=typeof define?define(["./mini"],b):"undefined"!=typeof module?module.exports=b(require("./mini")):dcl=b(dcl)})(function(b){function c(){}function f(b,d,f){var g=b||c,a=d||c,e=f||c,h=function(){var b;g.apply(this,arguments);try{b=e.apply(this,arguments)}catch(h){b=
h}a.call(this,arguments,b);if(b instanceof Error)throw b;return b};h.advices={b:b,a:d,f:f};return h}function j(c){return function(d,f){var g=d._m,a;g&&((a=+g.w[f]||0)&&a!=c&&b._e("set chaining",f,d,c,a),g.w[f]=c)}}var g=b(b.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});b.mix(b,{Advice:g,advise:function(b){return new g(b)},before:function(b){return new g({before:b})},after:function(b){return new g({after:b})},around:b.superCall,chainBefore:j(1),chainAfter:j(2),
isInstanceOf:function(b,d){if(b instanceof d)return!0;var c=b.constructor._m,f;if(c)for(c=c.b,f=c.length-1;0<=f;--f)if(c[f]===d)return!0;return!1},_sb:function(c,d,g,j){var j=j[g]=b._ec(d,g,"f"),a=b._ec(d,g,"b").reverse(),d=b._ec(d,g,"a"),j=c?b._st(j,1==c?function(a){return b._sc(a.reverse())}:b._sc,g):b._ss(j,g);return!a.length&&!d.length?j||function(){}:f(b._sc(a),b._sc(d),j)}});return b})},"dcl/mini":function(){(function(b){"undefined"!=typeof define?define([],b):"undefined"!=typeof module?module.exports=
b():dcl=b()})(function(){function b(a,e){var h=[0],d,c,m,k,r,p,q,w,v=0,s;if(a)if(a instanceof Array){k={};q=a.slice(0).reverse();for(w=q.length-1;0<=w;--w)if(c=q[w],c._u=c._u||j++,d=c._m){for(p=d.b,v=p.length-1;0<v;--v)s=p[v]._u,k[s]=(k[s]||0)+1;q[w]=p.slice(0)}else q[w]=[c];r={};a:for(;q.length;){for(w=0;w<q.length;++w)if(p=q[w],c=p[0],s=c._u,!k[s]){r[s]||(h.push(c),r[s]=1);p.shift();p.length?--k[p[0]._u]:q.splice(w,1);continue a}b._e("cycle",e,q)}a=a[0];v=h.length-((k=a._m)&&a===h[h.length-(v=k.b.length)]?
v:1)-1}else a._u=a._u||j++,h=h.concat((k=a._m)?k.b:a);d=a?b.delegate(a[i]):{};for(p=a&&(k=a._m)?b.delegate(k.w):{constructor:2};0<v;--v)if(c=h[v],k=c._m,l(d,k&&k.h||c[i]),k)for(s in q=k.w)p[s]=(+p[s]||0)|q[s];for(s in e)f(k=e[s])?p[s]=+p[s]||0:d[s]=k;r={b:h,h:e,w:p,c:{}};h[0]={_m:r,prototype:d};c=d;k=r.w;p=r.b;q=r.c;for(m in k)c[m]=b._sb(k[m],p,m,q);m=d[g];m._m=r;m[i]=d;h[0]=m;return b._p(m)}function c(a){this.f=a}function f(a){return a instanceof c}var j=0,g="constructor",i="prototype",d=function(){},
k={},l,a,e,h,m;(l=function(a,e){for(var b in e)a[b]=e[b]})(b,{mix:l,delegate:function(a){d[i]=a;a=new d;d[i]=null;return a},Super:c,superCall:function(a){return new c(a)},_p:function(a){return a},_e:function(a){throw Error("dcl: "+a);},_f:function(a,e){var b=a.f(e);b.ctr=a.ctr;return b},_ec:a=function(a,e,b){for(var h=a.length-1,d=[],c,m,g="f"==b;c=a[h];--h)if((m=c._m)?(m=m.h).hasOwnProperty(e)&&(f(m=m[e])?g?m.f:m=m[b]:g):g&&(m=c[i][e])&&m!==k[e])m.ctr=c,d.push(m);return d},_sc:h=function(a){var e=
a.length,b;return!e?0:1==e?(b=a[0],function(){b.apply(this,arguments)}):function(){for(var b=0;b<e;++b)a[b].apply(this,arguments)}},_ss:e=function(a,e){for(var h=0,d,c=k[e];d=a[h];++h)c=f(d)?a[h]=b._f(d,c,e):d;return e!=g?c:function(){c.apply(this,arguments)}},_st:m=function(a,e,h){for(var d=0,c,m,i=0;c=a[d];++d)f(c)&&(m=d-i,a[d]=b._f(c,!m?0:1==m?a[i]:e(a.slice(i,d)),h),i=d);m=d-i;return!m?0:1==m&&h!=g?a[i]:e(i?a.slice(i):a)},_sb:function(b,d,c,f){d=f[c]=a(d,c,"f");return(b?m(d,h,c):e(d,c))||function(){}}});
return b})},"dcl/bases/Mixer":function(){(function(b){"undefined"!=typeof define?define(["../mini"],b):"undefined"!=typeof module?module.exports=b(require("../mini")):dclBasesMixer=b(dcl)})(function(b){return b(null,{declaredClass:"dcl/bases/Mixer",constructor:function(c){b.mix(this,c)}})})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils/distance"],function(b,c,f,j){return b([c,f],{radius:1,draw:b.superCall(function(b){return function(c,d){var d=d||this.scale||
1,f=c.lineWidth;c.lineWidth=this.lineWidth;c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.arc(this.x*d,this.y*d,this.radius*d,0,2*Math.PI,!0);c.closePath();c.fill();c.stroke();this.staticBody||(c.save(),c.translate(this.x*d,this.y*d),c.rotate(this.angle),c.translate(-this.x*d,-this.y*d),c.beginPath(),c.moveTo(this.x*d,this.y*d),c.lineTo(this.x*d,this.y*d-this.radius*d),c.closePath(),c.stroke(),c.restore());c.lineWidth=f;b.apply(this,[c,d])}}),scaleShape:b.superCall(function(b){return function(c){this.radius*=
c;b.apply(this,[c])}}),pointInShape:function(b){return j(b,this)<=this.radius}})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,c,f){return b(c,{id:0,x:0,y:0,scale:null,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,staticBody:!1,fillStyle:"rgba(128,128,128,0.5)",strokeStyle:"#000",lineWidth:1,hidden:!1,maskBits:null,categoryBits:null,groupIndex:null,update:function(b){f.mixin(this,
b)},draw:function(){},scaleShape:function(b){this.x*=b;this.y*=b;this.alreadyScaled=!0}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(b,c){c.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var f=c("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],j=f.length,g=function(a,e,h){var d,c=0,f=b.global;if(!h)if(a.length){d=a[c++];try{h=b.scopeMap[d]&&
b.scopeMap[d][1]}catch(g){}h=h||(d in f?f[d]:e?f[d]={}:void 0)}else return f;for(;h&&(d=a[c++]);)h=d in h?h[d]:e?h[d]={}:void 0;return h},i=Object.prototype.toString,d=function(a,e,b){return(b||[]).concat(Array.prototype.slice.call(a,e||0))},k=/\{([^\}]+)\}/g,l={_extraNames:f,_mixin:function(a,e,b){var d,g,i,k={};for(d in e)if(g=e[d],!(d in a)||a[d]!==g&&(!(d in k)||k[d]!==g))a[d]=b?b(g):g;if(c("bug-for-in-skips-shadowed")&&e)for(i=0;i<j;++i)if(d=f[i],g=e[d],!(d in a)||a[d]!==g&&(!(d in k)||k[d]!==
g))a[d]=b?b(g):g;return a},mixin:function(a,e){a||(a={});for(var b=1,d=arguments.length;b<d;b++)l._mixin(a,arguments[b]);return a},setObject:function(a,e,b){var d=a.split("."),a=d.pop();return(b=g(d,!0,b))&&a?b[a]=e:void 0},getObject:function(a,e,b){return g(a.split("."),e,b)},exists:function(a,e){return void 0!==l.getObject(a,!1,e)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===
i.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||l.isArray(a)||l.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!l.isString(a)&&!l.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(l.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!l.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,e){for(var b=1,d=arguments.length;b<d;b++)l._mixin(a.prototype,arguments[b]);return a},_hitchArgs:function(a,e){var d=
l._toArray(arguments,2),c=l.isString(e);return function(){var f=l._toArray(arguments),g=c?(a||b.global)[e]:e;return g&&g.apply(a||this,d.concat(f))}},hitch:function(a,e){if(2<arguments.length)return l._hitchArgs.apply(b,arguments);e||(e=a,a=null);if(l.isString(e)){a=a||b.global;if(!a[e])throw['lang.hitch: scope["',e,'"] is null (scope="',a,'")'].join("");return function(){return a[e].apply(a,arguments||[])}}return!a?e:function(){return e.apply(a,arguments||[])}},delegate:function(){function a(){}
return function(e,b){a.prototype=e;var d=new a;a.prototype=null;b&&l._mixin(d,b);return d}}(),_toArray:c("ie")?function(){function a(a,b,d){d=d||[];for(b=b||0;b<a.length;b++)d.push(a[b]);return d}return function(e){return(e.item?a:d).apply(this,arguments)}}():d,partial:function(a){return l.hitch.apply(b,[null].concat(l._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||l.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());
if(a instanceof RegExp)return RegExp(a);var e,b,d;if(l.isArray(a)){e=[];for(b=0,d=a.length;b<d;++b)b in a&&e.push(l.clone(a[b]))}else e=a.constructor?new a.constructor:{};return l._mixin(e,a,l.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,e,b){return a.replace(b||k,l.isFunction(e)?e:function(a,b){return l.getObject(b,!1,e)})}};l.mixin(b,l);return l})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(b,c,f,j){var g,b={},i={},d={config:c,global:this,dijit:b,dojox:i},b={dojo:["dojo",d],dijit:["dijit",b],dojox:["dojox",i]},j=f.map&&f.map[j.id.match(/[^\/]+/)[0]];for(g in j)b[g]?b[g][0]=j[g]:b[g]=[j[g],{}];for(g in b)j=b[g],j[1]._scopeName=j[0],c.noGlobals||(this[j[0]]=j[1]);d.scopeMap=b;d.baseUrl=d.config.baseUrl=f.baseUrl;d.isAsync=f.async;d.locale=c.locale;c="$Rev: 30226 $".match(/\d+/);d.version={major:1,minor:8,patch:3,flag:"",revision:c?+c[0]:NaN,toString:function(){var b=
d.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(d);d.exit=function(){};d.deprecated=d.experimental=function(){};d._hasResource={};return d})},"dojo/has":function(){define("dojo/has",["require","module"],function(b){var c=b.has||function(){};c.add("touch","ontouchstart"in document);c.add("device-width",screen.availWidth||innerWidth);b=document.createElement("form");
c.add("dom-attributes-explicit",0==b.attributes.length);c.add("dom-attributes-specified-flag",0<b.attributes.length&&40>b.attributes.length);c.clearElement=function(b){b.innerHTML="";return b};c.normalize=function(b,j){var g=b.match(/[\?:]|[^:\?]*/g),i=0,d=function(b){var f=g[i++];if(":"==f)return 0;if("?"==g[i++]){if(!b&&c(f))return d();d(!0);return d(b)}return f||0};return(b=d())&&j(b)};c.load=function(b,c,g){b?c([b],g):g()};return c})},"dojo/_base/config":function(){define(["../has","require"],
function(b,c){var f={},j=c.rawConfig,g;for(g in j)f[g]=j[g];return f})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(b){var c=navigator,f=c.userAgent,c=c.appVersion,j=parseFloat(c);b.add("air",0<=f.indexOf("AdobeAIR"));b.add("khtml",0<=c.indexOf("Konqueror")?j:void 0);b.add("webkit",parseFloat(f.split("WebKit/")[1])||void 0);b.add("chrome",parseFloat(f.split("Chrome/")[1])||void 0);b.add("safari",0<=c.indexOf("Safari")&&!b("chrome")?parseFloat(c.split("Version/")[1]):void 0);b.add("mac",
0<=c.indexOf("Macintosh"));b.add("quirks","BackCompat"==document.compatMode);b.add("ios",/iPhone|iPod|iPad/.test(f));b.add("android",parseFloat(f.split("Android ")[1])||void 0);if(!b("webkit")){0<=f.indexOf("Opera")&&b.add("opera",9.8<=j?parseFloat(f.split("Version/")[1])||j:j);0<=f.indexOf("Gecko")&&!b("khtml")&&!b("webkit")&&b.add("mozilla",j);b("mozilla")&&b.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||void 0);if(document.all&&!b("opera"))f=parseFloat(c.split("MSIE ")[1])||
void 0,(c=document.documentMode)&&5!=c&&Math.floor(f)!=c&&(f=c),b.add("ie",f);b.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return b})},"frozen/utils/distance":function(){define(function(){return function(b,c){return Math.sqrt((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y))}})},"frozen/plugins/loadImage":function(){define(["../ResourceManager","../utils/parseString"],function(b,c){var f=new b;return{load:function(b,g,i){b=c(b);b=f.loadImage(b);i(b)}}})},"frozen/ResourceManager":function(){define(["./sounds/Sound!",
"dcl","dcl/bases/Mixer","dojo/_base/lang","dojo/on"],function(b,c,f,j,g){function i(b,c){var f=c;b&&(f=[b,c].join("/"));return f.replace(/\/{2,}/g,"/")}return c(f,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(b){var c=!1;if(!Array.isArray(b))if("string"===typeof b)c=!0,b=[b];else if("object"!==typeof b)return;for(var f in b)if(b.hasOwnProperty(f)){var a=i(this.imageDir,b[f]);if(this.resourceList[a])b[f]=this.resourceList[a].img;else{this.allLoaded=
!1;var e=new Image,h={name:a,img:e,complete:!1},m=j.partial(function(a){a.complete=!0},h);g(e,"load",m);e.src=a;this.resourceList[a]=h;b[f]=e}}return c?b[0]:b},loadSound:function(d){var c=!1;if(!Array.isArray(d))if("string"===typeof d)c=!0,d=[d];else if("object"!==typeof d)return;for(var f in d)if(d.hasOwnProperty(f)){var a=i(this.soundDir,d[f]);if(this.resourceList[a])d[f]=this.resourceList[a];else{this.allLoaded=!1;var e=new b(a);this.resourceList[a]=e;d[f]=e}}return c?d[0]:d},playSound:function(b,
c,f,a){b&&(c?b.loop(a):b.play(a,f||0))},resourcesReady:function(){if(!this.allLoaded){for(var b in this.resourceList)if(!this.resourceList[b].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var b=0,c=0,f;for(f in this.resourceList){var a=this.resourceList[f];c++;a.complete&&(b+=1)}return 0===c?0:Math.round(100*(b/c))}})})},"frozen/sounds/Sound":function(){define(["require","dojo/has","../shims/AudioContext"],function(b,c){c.add("WebAudio",function(b){return!!b.AudioContext});
return{load:function(f,j,g){b([c("WebAudio")?"./WebAudio":"./HTML5Audio"],function(b){g(b)})}}})},"frozen/shims/AudioContext":function(){define(function(){for(var b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.AudioContext;++c)window.AudioContext=window[b[c]+"AudioContext"]})},"dojo/on":function(){define("dojo/on",["require","./_base/kernel","./has"],function(b,c,f){function j(a,b,c,h,g){if(h=b.match(/(.*):(.*)/))return b=h[2],h=h[1],d.selector(h,b).call(g,a,c);f("touch")&&(k.test(b)&&(c=u(c)),
!f("event-orientationchange")&&"orientationchange"==b&&(b="resize",a=window,c=u(c)));m&&(c=m(c));if(a.addEventListener){var i=b in e,j=i?e[b]:b;a.addEventListener(j,c,i);return{remove:function(){a.removeEventListener(j,c,i)}}}b="on"+b;throw Error("Target must be an event emitter");}function g(){this.cancelable=!1}function i(){this.bubbles=!1}b=window.ScriptEngineMajorVersion;f.add("jscript",b&&b()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",
window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var d=function(a,b,e,c){return"function"==typeof a.on&&"function"!=typeof b?a.on(b,e):d.parse(a,b,e,j,c,this)};d.pausable=function(a,b,e,c){var h,a=d(a,b,function(){if(!h)return e.apply(this,arguments)},c);a.pause=function(){h=!0};a.resume=function(){h=!1};return a};d.once=function(a,b,e){var c=d(a,b,function(){c.remove();return e.apply(this,arguments)});return c};d.parse=function(a,b,e,d,c,h){if(b.call)return b.call(h,
a,e);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),f=[],g=0,i;i=b[g++];)f.push(d(a,i,e,c,h));f.remove=function(){for(var a=0;a<f.length;a++)f[a].remove()};return f}return d(a,b,e,c,h)};var k=/^touch/;d.selector=function(a,b,e){return function(h,f){function g(b){for(i=i&&i.matches?i:c.query;!i.matches(b,a,h);)if(b==h||!1===e||!(b=b.parentNode)||1!=b.nodeType)return;return b}var i="function"==typeof a?{matches:a}:this,m=b.bubble;return m?d(h,m(g),f):d(h,b,function(a){var b=g(a.target);return b&&
f.call(b,a)})}};var l=[].slice,a=d.emit=function(a,b,e){var d=l.call(arguments,2),c="on"+b;if("parentNode"in a){var h=d[0]={},f;for(f in e)h[f]=e[f];h.preventDefault=g;h.stopPropagation=i;h.target=a;h.type=b;e=h}do a[c]&&a[c].apply(a,d);while(e&&e.bubbles&&(a=a.parentNode));return e&&e.cancelable&&e},e={};if(!f("event-stopimmediatepropagation"))var h=function(){this.modified=this.immediatelyStopped=!0},m=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=h,a.apply(this,
arguments)}};e={focusin:"focus",focusout:"blur"};d.emit=function(b,e,h){if(b.dispatchEvent&&document.createEvent){var c=b.ownerDocument.createEvent("HTMLEvents");c.initEvent(e,!!h.bubbles,!!h.cancelable);for(var f in h)f in c||(c[f]=h[f]);return b.dispatchEvent(c)&&c}return a.apply(d,arguments)};if(f("touch"))var o=function(){},t=window.orientation,u=function(a){return function(b){var e=b.corrected;if(!e){var d=b.type;try{delete b.type}catch(h){}b.type?(o.prototype=b,e=new o,e.preventDefault=function(){b.preventDefault()},
e.stopPropagation=function(){b.stopPropagation()}):(e=b,e.type=d);b.corrected=e;if("resize"==d){if(t==window.orientation)return null;t=window.orientation;e.type="orientationchange";return a.call(this,e)}if(!("rotation"in e))e.rotation=0,e.scale=1;var d=e.changedTouches[0],c;for(c in d)delete e[c],e[c]=d[c]}return a.call(this,e)}};return d})},"frozen/utils/parseString":function(){define(function(){return function(b){0===b.indexOf("{")&&b.lastIndexOf("}")===b.length-1?b=JSON.parse(b.replace(/,/g,'","').replace(/:(?!\/\/)/g,
'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===b.indexOf("[")&&b.lastIndexOf("]")===b.length-1&&(b=JSON.parse(b.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return b}})},"game/entities":function(){define({entities:[{x:427.5,y:606.5,halfWidth:500,halfHeight:16.5,staticBody:!0,zone:!1,type:"Rectangle",id:0,restitution:5},{x:-50,y:285.5,halfWidth:23.5,halfHeight:500,staticBody:!0,zone:!1,type:"Rectangle",id:1},{x:430,y:-50,halfWidth:500,halfHeight:27.5,staticBody:!0,zone:!1,type:"Rectangle",
id:2},{x:890,y:340.5,halfWidth:49.5,halfHeight:500,staticBody:!0,zone:!1,type:"Rectangle",id:3},{points:[{x:-19.875,y:19.875},{x:-4.875,y:-28.125},{x:9.125,y:-44.125},{x:11.125,y:-45.125},{x:19.125,y:-37.125},{x:9.125,y:18.875},{x:-2.875,y:58.875},{x:-20.875,y:56.875}],x:167.875,y:310.125,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#192EC8",strokeStyle:"#192EC8",id:"luleg"},{points:[{x:-14.428571428571416,y:-40.71428571428572},{x:-2.4285714285714164,y:-47.71428571428572},{x:21.571428571428584,
y:9.285714285714278},{x:20.571428571428584,y:58.28571428571428},{x:2.5714285714285836,y:56.28571428571428},{x:-12.428571428571416,y:4.285714285714278},{x:-15.428571428571416,y:-39.71428571428572}],x:217.42857142857142,y:312.7142857142857,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#192EC8",strokeStyle:"#192EC8",id:"ruleg"},{points:[{x:-11.666666666666657,y:-46.66666666666666},{x:9.333333333333343,y:-47.66666666666666},{x:27.333333333333343,y:-41.66666666666666},{x:30.333333333333343,y:-11.666666666666657},
{x:28.333333333333343,y:59.33333333333334},{x:6.333333333333343,y:69.33333333333334},{x:-20.666666666666657,y:56.33333333333334},{x:-33.66666666666666,y:-3.666666666666657},{x:-35.66666666666666,y:-33.66666666666666}],x:190.66666666666666,y:215.66666666666666,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"white",strokeStyle:"white",id:"torso"},{x:189,y:156,halfWidth:9,halfHeight:20,staticBody:!1,zone:!1,type:"Rectangle",fillStyle:"#EECEB3",strokeStyle:"#EECEB3",id:"neck"},{x:189,y:143,radius:24,
staticBody:!1,zone:!1,type:"Circle",fillStyle:"rgba(239,208,207,0.2)",id:"head"},{points:[{x:-2.75,y:-33},{x:18.25,y:-32},{x:1.25,y:35},{x:-16.75,y:30}],x:147.75,y:217,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"white",strokeStyle:"white",id:"luarm"},{points:[{x:-4,y:-37},{x:24,y:30},{x:5,y:37},{x:-25,y:-30}],x:234,y:214,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"white",strokeStyle:"white",id:"ruarm"},{points:[{x:-8,y:-15},{x:4,y:-26},{x:13,y:-25},{x:13,y:-7},{x:-7,y:37},{x:-15,y:36}],x:134,
y:267,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#EECEB3",strokeStyle:"#EECEB3",id:"llarm"},{points:[{x:-11,y:-19.285714285714278},{x:-2,y:-22.285714285714278},{x:9,y:-10.285714285714278},{x:19,y:32.71428571428572},{x:9,y:36.71428571428572},{x:-12,y:0.7142857142857224},{x:-12,y:-18.285714285714278}],x:253,y:258.2857142857143,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#EECEB3",strokeStyle:"#EECEB3",id:"rlarm"},{points:[{x:4.400000000000006,y:-20.80000000000001},{x:11.400000000000006,y:-5.800000000000011},
{x:1.4000000000000057,y:17.19999999999999},{x:-7.599999999999994,y:16.19999999999999},{x:-9.599999999999994,y:-6.800000000000011}],x:120.6,y:318.8,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#EECEB3",strokeStyle:"#EECEB3",id:"lhand"},{points:[{x:-8,y:-16.833333333333314},{x:-6,y:-15.833333333333314},{x:8,y:-6.833333333333314},{x:14,y:16.166666666666686},{x:4,y:22.166666666666686},{x:-12,y:1.1666666666666856}],x:273,y:302.8333333333333,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#EECEB3",strokeStyle:"#EECEB3",
id:"rhand"},{points:[{x:-9.285714285714278,y:-12.571428571428555},{x:-0.2857142857142776,y:-24.571428571428555},{x:1.7142857142857224,y:-25.571428571428555},{x:9.714285714285722,y:-24.571428571428555},{x:11.714285714285722,y:-1.5714285714285552},{x:0.7142857142857224,y:44.428571428571445},{x:-14.285714285714278,y:44.428571428571445}],x:153.28571428571428,y:384.57142857142856,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#192EC8",strokeStyle:"#192EC8",id:"llleg"},{points:[{x:-7,y:-25.142857142857167},
{x:-5,y:-26.142857142857167},{x:3,y:-26.142857142857167},{x:11,y:-10.142857142857167},{x:11,y:42.85714285714283},{x:-1,y:45.85714285714283},{x:-12,y:-1.1428571428571672}],x:232,y:387.14285714285717,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"#192EC8",strokeStyle:"#192EC8",id:"rlleg"},{points:[{x:1.75,y:-16.25},{x:10.75,y:-16.25},{x:10.75,y:15.75},{x:-23.25,y:16.75}],x:142.25,y:437.25,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"black",id:"lfoot"},{points:[{x:-8,y:-10.199999999999989},{x:-6,
y:-11.199999999999989},{x:0,y:-13.199999999999989},{x:24,y:17.80000000000001},{x:-10,y:16.80000000000001}],x:241,y:435.2,staticBody:!1,zone:!1,type:"Polygon",fillStyle:"black",id:"rfoot"}],joints:[{bodyId1:"head",bodyId2:"neck",type:"Revolute",id:"head",jointAttributes:{enableLimit:!0,lowerAngle:-0.5,upperAngle:0.5}},{bodyId1:"neck",bodyId2:"torso",type:"Revolute",id:"neck",bodyPoint1:{x:190,y:173}},{bodyId1:"luarm",bodyId2:"torso",type:"Revolute",id:"lshoulder",bodyPoint1:{x:160,y:189},jointAttributes:{enableLimit:!0,
lowerAngle:-3,upperAngle:0.9}},{bodyId1:"ruarm",bodyId2:"torso",type:"Revolute",id:"rshoulder",bodyPoint1:{x:216,y:196},jointAttributes:{enableLimit:!0,lowerAngle:-0.9,upperAngle:3}},{bodyId1:"llarm",bodyId2:"luarm",type:"Revolute",id:"lelbow",bodyPoint1:{x:142,y:245}},{bodyId1:"rlarm",bodyId2:"ruarm",type:"Revolute",id:"relbow",bodyPoint1:{x:248,y:243}},{bodyId1:"luleg",bodyId2:"torso",type:"Revolute",id:"lhip",bodyPoint1:{x:181,y:274},jointAttributes:{enableLimit:!0,lowerAngle:-1.570796,upperAngle:0.785385}},
{bodyId1:"ruleg",bodyId2:"torso",type:"Revolute",id:"rhip",bodyPoint1:{x:210,y:273},jointAttributes:{enableLimit:!0,lowerAngle:-0.785385,upperAngle:1.570796}},{bodyId1:"llleg",bodyId2:"luleg",type:"Revolute",id:"lknee",bodyPoint1:{x:157,y:364},jointAttributes:{enableLimit:!0,lowerAngle:-0.185385,upperAngle:1.570796}},{bodyId1:"rlleg",bodyId2:"ruleg",type:"Revolute",id:"rknee",bodyPoint1:{x:231,y:364},jointAttributes:{enableLimit:!0,lowerAngle:-1.570796,upperAngle:0.185385}},{bodyId1:"lhand",bodyId2:"llarm",
type:"Revolute",id:"lhand",bodyPoint1:{x:125,y:302},jointAttributes:{enableLimit:!0,lowerAngle:-1.6,upperAngle:1.6}},{bodyId1:"rhand",bodyId2:"rlarm",type:"Revolute",id:"rhand",bodyPoint1:{x:268,y:290},jointAttributes:{enableLimit:!0,lowerAngle:-1.6,upperAngle:1.6}},{bodyId1:"lfoot",bodyId2:"llleg",type:"Revolute",id:"lfoot",bodyPoint1:{x:147,y:426},jointAttributes:{enableLimit:!0,lowerAngle:-1.070796,upperAngle:0.785385}},{bodyId1:"rfoot",bodyId2:"rlleg",type:"Revolute",id:"rfoot",bodyPoint1:{x:238,
y:427},jointAttributes:{enableLimit:!0,lowerAngle:-0.785385,upperAngle:1.070796}}],canvas:{height:600,width:800},backImg:null})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(b,c){return b.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:c("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,
NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:c("mac")&&!c("air")?c("safari")?91:224:17}})},"frozen/utils/radiansFromCenter":function(){define(function(){var b=
{x:0,y:0};return function(c,f){c=c||b;return c.x===f.x&&c.y===f.y?0:c.x===f.x?c.y>f.y?0:Math.PI:c.y===f.y?c.x>f.x?1.5*Math.PI:Math.PI/2:c.x<f.x&&c.y>f.y?Math.atan((f.x-c.x)/(c.y-f.y)):c.x<f.x&&c.y<f.y?Math.PI/2+Math.atan((f.y-c.y)/(f.x-c.x)):c.x>f.x&&c.y<f.y?Math.PI+Math.atan((c.x-f.x)/(f.y-c.y)):1.5*Math.PI+Math.atan((c.y-f.y)/(c.x-f.x))}})},"frozen/utils/scalePoints":function(){define(function(){function b(c,f){if(Array.isArray(c)){var j=[];c.forEach(function(c){j.push(b(c,f))});c=j}else c="object"===
typeof f?{x:c.x*f.x,y:c.y*f.y}:{x:c.x*f,y:c.y*f};return c}return b})},"frozen/box2d/BoxGame":function(){define(["../GameCore","./Box","dcl","dcl/bases/Mixer"],function(b,c,f,j){return f([b,j],{box:null,boxUpdating:!0,entities:null,constructor:function(){if(!this.box)this.box=new c;if(!this.entities)this.entities={}},preUpdate:function(b){this.boxUpdating&&(this.box.update(b),this.box.updateExternalState(this.entities))}})})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),
function(b,c,f,j,g,i){return b(c,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,setHeight:function(b){this.height=b;this.canvas.height=b},setWidth:function(b){this.width=b;this.canvas.width=b},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),
this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=j.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new g({canvas:this.canvas,gameArea:j.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new g({canvas:this.canvas});
this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new i;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=
Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||(this.preUpdate(this.elapsedTime),this.update(this.elapsedTime)),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var b=Date.now();this.prevTime=this.currTime=
b;this.loopRunner=f.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},preUpdate:function(){},update:function(){},updateLoadingScreen:function(){},draw:function(b){if("2d"===this.contextType)b.font="14px sans-serif",b.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(b){if(this.resourceManager&&"2d"===this.contextType)b.fillStyle=this.loadingBackground,
b.fillRect(0,0,this.width,this.height),b.fillStyle=this.loadingForeground,b.strokeStyle=this.loadingForeground,b.font="bold "+Math.floor(this.height/12)+"px sans-serif",b.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),b.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),b.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),b.lineWidth=4}})})},"dojo/dom":function(){define(["./sniff",
"./_base/window"],function(b,c){if(7>=b("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}var j={};j.byId=b("ie")?function(b,d){if("string"!=typeof b)return b;var f=d||c.doc,g=b&&f.getElementById(b);if(g&&(g.attributes.id.value==b||g.id==b))return g;f=f.all[b];if(!f||f.nodeName)f=[f];for(var a=0;g=f[a++];)if(g.attributes&&g.attributes.id&&g.attributes.id.value==b||g.id==b)return g}:function(b,d){return("string"==typeof b?(d||c.doc).getElementById(b):b)||null};j.isDescendant=function(b,
d){try{b=j.byId(b);for(d=j.byId(d);b;){if(b==d)return!0;b=b.parentNode}}catch(c){}return!1};b.add("css-user-select",function(b,d,c){if(!c)return!1;var b=c.style,d=["Khtml","O","ms","Moz","Webkit"],c=d.length,f="userSelect";do if("undefined"!==typeof b[f])return f;while(c--&&(f=d[c]+"UserSelect"));return!1});var g=b("css-user-select");j.setSelectable=g?function(b,c){j.byId(b).style[g]=c?"":"none"}:function(b,c){var b=j.byId(b),f=b.getElementsByTagName("*"),g=f.length;if(c)for(b.removeAttribute("unselectable");g--;)f[g].removeAttribute("unselectable");
else for(b.setAttribute("unselectable","on");g--;)f[g].setAttribute("unselectable","on")};return j})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(b,c,f){var j={global:b.global,doc:this.document||null,body:function(c){c=c||b.doc;return c.body||c.getElementsByTagName("body")[0]},setContext:function(c,f){b.global=j.global=c;b.doc=j.doc=f},withGlobal:function(c,f,d,k){var l=b.global;try{return b.global=j.global=c,j.withDoc.call(null,c.document,f,d,k)}finally{b.global=
j.global=l}},withDoc:function(c,i,d,k){var l=j.doc,a=f("quirks"),e=f("ie"),h,m,o;try{b.doc=j.doc=c;b.isQuirks=f.add("quirks","BackCompat"==b.doc.compatMode,!0,!0);if(f("ie")&&(o=c.parentWindow)&&o.navigator)h=parseFloat(o.navigator.appVersion.split("MSIE ")[1])||void 0,(m=c.documentMode)&&5!=m&&Math.floor(h)!=m&&(h=m),b.isIE=f.add("ie",h,!0,!0);d&&"string"==typeof i&&(i=d[i]);return i.apply(d,k||[])}finally{b.doc=j.doc=l,b.isQuirks=f.add("quirks",a,!0,!0),b.isIE=f.add("ie",e,!0,!0)}}};c.mixin(b,j);
return j})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dojo/has,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(b,c,f,j,g,i,d,k,l,a){return j(g,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(d(document,"keydown",a.hitch(this,"keyDown")),d(document,"keyup",
a.hitch(this,"keyReleased")));this.handleMouse&&!i("touch")&&(d(document,"mousedown",a.hitch(this,"mouseDown")),d(document,"mousemove",a.hitch(this,"mouseMove")),d(document,"mouseup",a.hitch(this,"mouseUp")));this.handleTouch&&i("touch")&&(d(document,"touchstart",a.hitch(this,"touchStart")),d(document,"touchmove",a.hitch(this,"touchMove")),d(document,"touchend",a.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new c;if(!this.touchAction)this.touchAction=new c;this.gameArea&&this.canvasPercentage&&
(d(window,"resize",a.hitch(this,"resize")),d(window,"orientationchange",a.hitch(this,"resize")))},mapToKey:function(a,b){if(!this.keyActions)this.keyActions=[];this.keyActions[b]=a},addKeyAction:function(a,c){var d=new b;if(c)d.behavior=d.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(d,a);return d},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){a=
this.getMouseLoc(a);this.mouseAction.endPosition=null;this.mouseAction.insideCanvas=f(a,this.canvas);this.mouseAction.insideCanvas?(this.mouseAction.press(),this.mouseAction.startPosition=a,this.mouseAction.position=a):this.mouseAction.startPosition=null},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){a=this.getMouseLoc(a.changedTouches[0]);this.touchAction.endPosition=null;this.touchAction.insideCanvas=f(a,this.canvas);this.touchAction.insideCanvas?(this.touchAction.press(),
this.touchAction.startPosition=a,this.touchAction.position=a):this.touchAction.startPosition=null},touchEnd:function(a){this.touchAction.release();this.touchAction.endPosition=this.getMouseLoc(a.changedTouches[0])},touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);this.touchAction.startPosition&&a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=
this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var b=l.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-b.x)/this.zoomRatio),y:Math.round((a.clientY-b.y)/this.zoomRatio)}:{x:Math.round(a.clientX-b.x),y:Math.round(a.clientY-b.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,
b=this.canvas.height,c=l.getMarginExtents(document.body),d=window.innerWidth-c.w,c=window.innerHeight-c.h,b=a/b,f="",g="";d/c>b?(d=c*b,f=d+"px"):g=Math.round(d/b)+"px";this.zoomRatio=d/a*this.canvasPercentage;k.set(this.gameArea,{width:f,height:g});a=Math.floor(100*this.canvasPercentage)+"%";k.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(b,c){return b(c,{name:null,behavior:0,
amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(b){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=
b,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var b=this.amount;if(0!==b)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return b}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],
function(b,c,f){return b([c,f],{startPosition:null,endPosition:null,position:null})})},"frozen/utils/insideCanvas":function(){define(function(){return function(b,c){return 0>b.x||b.x>c.width||0>b.y||b.y>c.height?!1:!0}})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(b,c){function f(c,d,h){d=d.toLowerCase();if(b("ie")){if("auto"==h){if("height"==d)return c.offsetHeight;if("width"==d)return c.offsetWidth}if("fontweight"==d)switch(h){case 700:return"bold";default:return"normal"}}d in
a||(a[d]=e.test(d));return a[d]?i(c,h):h}var j,g={};j=b("webkit")?function(a){var b;if(1==a.nodeType){var e=a.ownerDocument.defaultView;b=e.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=e.getComputedStyle(a,null)}return b||{}}:b("ie")&&(9>b("ie")||b("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};g.getComputedStyle=j;var i;i=b("ie")?function(a,b){if(!b)return 0;if("medium"==
b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var e=a.style,c=a.runtimeStyle,d=e.left,h=c.left;c.left=a.currentStyle.left;try{e.left=b,b=e.pixelLeft}catch(f){b=0}e.left=d;c.left=h;return b}:function(a,b){return parseFloat(b)||0};g.toPixelValue=i;var d=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){return b?{}:null}},k=9>b("ie")||10>b("ie")&&b("quirks")?function(a){try{return d(a).Opacity/100}catch(b){return 1}}:function(a){return j(a).opacity},
l=9>b("ie")||10>b("ie")&&b("quirks")?function(a,b){var e=100*b,c=1==b;a.style.zoom=c?"":1;if(d(a))d(a,1).Opacity=e;else{if(c)return b;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+e+")"}d(a,1).Enabled=!c;if("tr"==a.tagName.toLowerCase())for(e=a.firstChild;e;e=e.nextSibling)"td"==e.tagName.toLowerCase()&&l(e,b);return b}:function(a,b){return a.style.opacity=b},a={left:!0,top:!0},e=/margin|padding|width|height|max|min|offset/,h=b("ie")?"styleFloat":"cssFloat",m={cssFloat:h,styleFloat:h,
"float":h};g.get=function(a,b){var e=c.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return k(e);var b=m[b]||b,h=g.getComputedStyle(e);return 1==d?h:f(e,b,h[b]||e.style[b])};g.set=function(a,b,e){var d=c.byId(a),h=arguments.length,f="opacity"==b,b=m[b]||b;if(3==h)return f?l(d,e):d.style[b]=e;for(var j in b)g.set(a,j,b[j]);return g.getComputedStyle(d)};return g})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(b,c,f,j){function g(a,b,c,d,f,g){g=
g||"px";a=a.style;if(!isNaN(b))a.left=b+g;if(!isNaN(c))a.top=c+g;if(0<=d)a.width=d+g;if(0<=f)a.height=f+g}function i(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function d(a){return"border-box"==k.boxModel||"table"==a.tagName.toLowerCase()||i(a)}var k={boxModel:"content-box"};if(b("ie"))k.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";k.getPadExtents=function(a,b){var a=f.byId(a),c=b||j.getComputedStyle(a),
d=j.toPixelValue,g=d(a,c.paddingLeft),i=d(a,c.paddingTop),k=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:g,t:i,r:k,b:c,w:g+k,h:i+c}};k.getBorderExtents=function(a,b){var a=f.byId(a),c=j.toPixelValue,d=b||j.getComputedStyle(a),g="none"!=d.borderLeftStyle?c(a,d.borderLeftWidth):0,i="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,k="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):0;return{l:g,t:i,r:k,b:c,w:g+k,h:i+c}};k.getPadBorderExtents=
function(a,b){var a=f.byId(a),c=b||j.getComputedStyle(a),d=k.getPadExtents(a,c),c=k.getBorderExtents(a,c);return{l:d.l+c.l,t:d.t+c.t,r:d.r+c.r,b:d.b+c.b,w:d.w+c.w,h:d.h+c.h}};k.getMarginExtents=function(a,b){var a=f.byId(a),c=b||j.getComputedStyle(a),d=j.toPixelValue,g=d(a,c.marginLeft),i=d(a,c.marginTop),k=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:g,t:i,r:k,b:c,w:g+k,h:i+c}};k.getMarginBox=function(a,e){var a=f.byId(a),c=e||j.getComputedStyle(a),d=k.getMarginExtents(a,c),g=a.offsetLeft-d.l,
i=a.offsetTop-d.t,l=a.parentNode,n=j.toPixelValue;if(b("mozilla")){var A=parseFloat(c.left),c=parseFloat(c.top);!isNaN(A)&&!isNaN(c)?(g=A,i=c):l&&l.style&&(l=j.getComputedStyle(l),"visible"!=l.overflow&&(g+="none"!=l.borderLeftStyle?n(a,l.borderLeftWidth):0,i+="none"!=l.borderTopStyle?n(a,l.borderTopWidth):0))}else if((b("opera")||8==b("ie")&&!b("quirks"))&&l)l=j.getComputedStyle(l),g-="none"!=l.borderLeftStyle?n(a,l.borderLeftWidth):0,i-="none"!=l.borderTopStyle?n(a,l.borderTopWidth):0;return{l:g,
t:i,w:a.offsetWidth+d.w,h:a.offsetHeight+d.h}};k.getContentBox=function(a,e){var a=f.byId(a),c=e||j.getComputedStyle(a),d=a.clientWidth,g=k.getPadExtents(a,c),i=k.getBorderExtents(a,c);d?(c=a.clientHeight,i.w=i.h=0):(d=a.offsetWidth,c=a.offsetHeight);b("opera")&&(g.l+=i.l,g.t+=i.t);return{l:g.l,t:g.t,w:d-g.w-i.w,h:c-g.h-i.h}};k.setContentSize=function(a,b,c){var a=f.byId(a),i=b.w,b=b.h;d(a)&&(c=k.getPadBorderExtents(a,c),0<=i&&(i+=c.w),0<=b&&(b+=c.h));g(a,NaN,NaN,i,b)};var l={l:0,t:0,w:0,h:0};k.setMarginBox=
function(a,e,c){var a=f.byId(a),m=c||j.getComputedStyle(a),c=e.w,o=e.h,t=d(a)?l:k.getPadBorderExtents(a,m),m=k.getMarginExtents(a,m);if(b("webkit")&&i(a)){var u=a.style;if(0<=c&&!u.width)u.width="4px";if(0<=o&&!u.height)u.height="4px"}0<=c&&(c=Math.max(c-t.w-m.w,0));0<=o&&(o=Math.max(o-t.h-m.h,0));g(a,e.l,e.t,c,o)};k.isBodyLtr=function(a){a=a||c.doc;return"ltr"==(c.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(a){var a=a||c.doc,e=c.doc.parentWindow||c.doc.defaultView;
return"pageXOffset"in e?{x:e.pageXOffset,y:e.pageYOffset}:(e=b("quirks")?c.body(a):a.documentElement)&&{x:k.fixIeBiDiScrollLeft(e.scrollLeft||0,a),y:e.scrollTop||0}};if(b("ie"))k.getIeDocumentElementOffset=function(a){a=a||c.doc;a=a.documentElement;if(8>b("ie")){var e=a.getBoundingClientRect(),d=e.left,e=e.top;7>b("ie")&&(d+=a.clientLeft,e+=a.clientTop);return{x:0>d?0:d,y:0>e?0:e}}return{x:0,y:0}};k.fixIeBiDiScrollLeft=function(a,e){var e=e||c.doc,d=b("ie");if(d&&!k.isBodyLtr(e)){var f=b("quirks"),
g=f?c.body(e):e.documentElement,i=c.global;6==d&&!f&&i.frameElement&&g.scrollHeight>g.clientHeight&&(a+=g.clientLeft);return 8>d||f?a+g.clientWidth-g.scrollWidth:-a}return a};k.position=function(a,e){var a=f.byId(a),d=c.body(a.ownerDocument),g=a.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>b("ie")){var i=k.getIeDocumentElementOffset(a.ownerDocument);g.x-=i.x+(b("quirks")?d.clientLeft+d.offsetLeft:0);g.y-=i.y+(b("quirks")?d.clientTop+d.offsetTop:0)}e&&(d=k.docScroll(a.ownerDocument),
g.x+=d.x,g.y+=d.y);return g};k.getMarginSize=function(a,b){var a=f.byId(a),c=k.getMarginExtents(a,b||j.getComputedStyle(a)),d=a.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-d.top+c.h}};k.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY};return k})},"dojo/domReady":function(){define(["./has"],function(){function b(a){i?a(f):d.push(a)}var c=this,f=document,j={loaded:1,complete:1},g="string"!=typeof f.readyState,i=!!j[f.readyState];if(g)f.readyState=
"loading";if(!i){var d=[],k=[],l=function(a){a=a||c.event;if(!(i||"readystatechange"==a.type&&!j[f.readyState])){i=1;if(g)f.readyState="complete";for(;d.length;)d.shift()(f)}},a=function(a,b){a.addEventListener(b,l,!1);d.push(function(){a.removeEventListener(b,l,!1)})};a(f,"DOMContentLoaded");a(c,"load");"onreadystatechange"in f?a(f,"readystatechange"):g||k.push(function(){return j[f.readyState]});if(k.length){var e=function(){if(!i){for(var a=k.length;a--;)if(k[a]()){l("poller");return}setTimeout(e,
30)}};e()}}b.load=function(a,e,c){b(c)};return b})},"frozen/shims/RAF":function(){define(function(){for(var b=0,c=["ms","moz","webkit","o"],f=0;f<c.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[c[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[f]+"CancelAnimationFrame"]||window[c[f]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(c){var f=(new Date).getTime(),i=Math.max(0,16-(f-b)),d=window.setTimeout(function(){c(f+
i)},i);b=f+i;return d};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(b){clearTimeout(b)}})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(b,c){var f=Box2D.Common.Math.b2Vec2,j=Box2D.Dynamics.b2BodyDef,g=Box2D.Dynamics.b2Body,i=Box2D.Dynamics.b2FixtureDef,d=Box2D.Dynamics.b2World,k=Box2D.Collision.Shapes.b2PolygonShape,l=Box2D.Collision.Shapes.b2CircleShape;return b(c,{intervalRate:60,adaptive:!1,bodiesMap:null,fixturesMap:null,jointsMap:null,
b2World:null,gravityX:0,gravityY:9.8,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,scale:30,constructor:function(a){if(a&&a.intervalRate)this.intervalRate=parseInt(a.intervalRate,10);this.bodiesMap={};this.fixturesMap={};this.jointsMap={};this.b2World=new d(new f(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(a){if(this.resolveCollisions)this.collisions={};var b=Date.now();a?this.b2World.Step(a/
1E3,10,10):this.b2World.Step(this.adaptive?(b-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.b2World.ClearForces();return Date.now()-b},getState:function(){for(var a={},b=this.b2World.GetBodyList();b;b=b.m_next)if(b.IsActive()&&"undefined"!==typeof b.GetUserData()&&null!==b.GetUserData()&&(a[b.GetUserData()]={x:b.GetPosition().x,y:b.GetPosition().y,angle:b.GetAngle(),center:{x:b.GetWorldCenter().x,y:b.GetWorldCenter().y},linearVelocity:b.m_linearVelocity,angularVelocity:b.m_angularVelocity},
this.resolveCollisions))a[b.GetUserData()].collisions=this.collisions[b.GetUserData()]||null;return a},updateExternalState:function(a){var b=this.getState(),c;for(c in b){var d=a[c];d&&!d.staticBody&&d.update(b[c])}},setBodies:function(a){for(var b in a)this.addBody(a[b]);this.ready=!0},addBody:function(a){if(!a.alreadyScaled)a.scaleShape(1/this.scale),a.scale=this.scale;var b=new j,c=new i,d,o,t,u;c.restitution=a.restitution;c.density=a.density;c.friction=a.friction;if(a.hasOwnProperty("maskBits"))c.filter.maskBits=
a.maskBits;if(a.hasOwnProperty("categoryBits"))c.filter.categoryBits=a.categoryBits;if(a.hasOwnProperty("groupIndex"))c.filter.groupIndex=a.groupIndex;b.type=a.staticBody?g.b2_staticBody:g.b2_dynamicBody;b.position.x=a.x;b.position.y=a.y;b.userData=a.id;b.angle=a.angle;b.linearDamping=a.linearDamping;b.angularDamping=a.angularDamping;var n=this.b2World.CreateBody(b);if(a.radius)c.shape=new l(a.radius),n.CreateFixture(c);else if(a.points){o=[];for(b=0;b<a.points.length;b++)t=new f,t.Set(a.points[b].x,
a.points[b].y),o[b]=t;c.shape=new k;c.shape.SetAsArray(o,o.length);n.CreateFixture(c)}else if(a.polys)for(d=0;d<a.polys.length;d++){o=a.polys[d];u=[];for(b=0;b<o.length;b++)t=new f,t.Set(o[b].x,o[b].y),u[b]=t;c.shape=new k;c.shape.SetAsArray(u,u.length);n.CreateFixture(c)}else c.shape=new k,c.shape.SetAsBox(a.halfWidth,a.halfHeight),n.CreateFixture(c);this.bodiesMap[a.id]=n},setPosition:function(a,b,c){this.bodiesMap[a].SetPosition(new f(b,c))},setAngle:function(a,b){this.bodiesMap[a].SetAngle(b)},
setLinearVelocity:function(a,b,c){this.bodiesMap[a].SetLinearVelocity(new f(b,c))},applyImpulseDegrees:function(a,b,c){a=this.bodiesMap[a];a.ApplyImpulse(new f(Math.sin(b*(Math.PI/180))*c,-1*Math.cos(b*(Math.PI/180))*c),a.GetWorldCenter())},applyForceDegrees:function(a,b,c){a=this.bodiesMap[a];a.ApplyForce(new f(Math.sin(b*(Math.PI/180))*c,-1*Math.cos(b*(Math.PI/180))*c),a.GetWorldCenter())},applyImpulse:function(a,b,c){a=this.bodiesMap[a];a.ApplyImpulse(new f(Math.sin(b)*c,-1*Math.cos(b)*c),a.GetWorldCenter())},
applyForce:function(a,b,c){a=this.bodiesMap[a];a.ApplyForce(new f(Math.sin(b)*c,-1*Math.cos(b)*c),a.GetWorldCenter())},applyTorque:function(a,b){this.bodiesMap[a].ApplyTorque(b)},setGravity:function(a){this.b2World.SetGravity(new f(a.x,a.y))},removeBody:function(a){this.bodiesMap[a]&&(this.fixturesMap[a]&&this.bodiesMap[a].DestroyFixture(this.fixturesMap[a]),this.b2World.DestroyBody(this.bodiesMap[a]),delete this.bodiesMap[a])},wakeUpBody:function(a){this.bodiesMap[a]&&this.bodiesMap[a].SetAwake(!0)},
addContactListener:function(a){var b=new Box2D.Dynamics.b2ContactListener;if(a.beginContact)b.BeginContact=function(b){a.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.EndContact)b.endContact=function(b){a.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(a.postSolve)b.PostSolve=function(b,c){a.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),c.normalImpulses[0])};
this.b2World.SetContactListener(b)},destroyJoint:function(a){this.jointsMap[a]&&(this.b2World.DestroyJoint(this.jointsMap[a]),delete this.jointsMap[a])},addJoint:function(a){if(a&&a.id&&!this.jointsMap[a.id]){if(!a.alreadyScaled&&a.scaleJointLocation)a.scaleJointLocation(1/this.scale),a.scale=this.scale;var b=a.createB2Joint(this);b&&(this.jointsMap[a.id]=b)}},beginContact:function(){},endContact:function(){},postSolve:function(a,b,c){this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,
impulse:c});this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,impulse:c})}})})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(b,c,f){return b([c,f],{halfWidth:1,halfHeight:1,draw:b.superCall(function(b){return function(c,f){var f=f||this.scale||1,d=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*f,this.y*f);c.rotate(this.angle);c.translate(-this.x*f,-this.y*f);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;
c.fillRect((this.x-this.halfWidth)*f,(this.y-this.halfHeight)*f,2*this.halfWidth*f,2*this.halfHeight*f);c.strokeRect((this.x-this.halfWidth)*f,(this.y-this.halfHeight)*f,2*this.halfWidth*f,2*this.halfHeight*f);c.restore();c.lineWidth=d;b.apply(this,[c,f])}}),scaleShape:b.superCall(function(b){return function(c){this.halfHeight*=c;this.halfWidth*=c;b.apply(this,[c])}}),pointInShape:function(b){return b.x>=this.x-this.halfWidth&&b.x<=this.x+this.halfWidth&&b.y>=this.y-this.halfHeight&&b.y<=this.y+this.halfHeight}})})},
"frozen/box2d/PolygonEntity":function(){define("dcl,dcl/bases/Mixer,./Entity,../utils/scalePoints,../utils/pointInPolygon,../utils/translatePoints".split(","),function(b,c,f,j,g,i){return b([c,f],{points:[],draw:b.superCall(function(b){return function(c,f){var f=f||this.scale||1,a=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*f,this.y*f);c.rotate(this.angle);c.translate(-this.x*f,-this.y*f);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.moveTo((this.x+
this.points[0].x)*f,(this.y+this.points[0].y)*f);for(var e=1;e<this.points.length;e++)c.lineTo((this.points[e].x+this.x)*f,(this.points[e].y+this.y)*f);c.lineTo((this.x+this.points[0].x)*f,(this.y+this.points[0].y)*f);c.closePath();c.fill();c.stroke();c.restore();c.lineWidth=a;b.apply(this,[c,f])}}),scaleShape:b.superCall(function(b){return function(c){this.points=j(this.points,c);b.apply(this,[c])}}),pointInShape:function(b){return g(b,i(this.points,this))}})})},"frozen/utils/pointInPolygon":function(){define(function(){return function(b,
c){if(!b||!c)return!1;for(var f=c.points||c,j=!1,g=f.length-1,i=0;i<f.length;g=i++){var d=f[i].x,k=f[i].y,l=f[g].x,g=f[g].y;k>b.y!==g>b.y&&b.x<(l-d)*(b.y-k)/(g-k)+d&&(j=!j)}return j}})},"frozen/utils/translatePoints":function(){define(function(){function b(c,f){if(Array.isArray(c)){var j=[];c.forEach(function(c){j.push(b(c,f))});c=j}else c={x:c.x,y:c.y},null!=f.x&&(c.x+=f.x),null!=f.y&&(c.y+=f.y);return c}return b})},"frozen/box2d/joints/Revolute":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang",
"./Joint"],function(b,c,f,j){var g=Box2D.Common.Math.b2Vec2,i=Box2D.Dynamics.Joints.b2RevoluteJointDef;return b([c,j],{createB2Joint:function(b){if(b&&b.bodiesMap&&b.b2World&&b.jointsMap&&!b.jointsMap[this.id]){var c=b.bodiesMap[this.bodyId1],j=b.bodiesMap[this.bodyId2];if(c&&j){var a;this.bodyPoint1&&(a=new g(this.bodyPoint1.x,this.bodyPoint1.y));a=a||c.GetWorldCenter();var e=new i;e.Initialize(c,j,a,void 0);this.jointAttributes&&f.mixin(e,this.jointAttributes);return b.b2World.CreateJoint(e)}}}})})},
"frozen/box2d/joints/Joint":function(){define(["dcl","dcl/bases/Mixer"],function(b,c){return b(c,{bodyId1:null,bodyId2:null,bodyPoint1:null,jointAttributes:null,scaleJointLocation:function(b){if(b&&this.bodyPoint1)this.bodyPoint1.x*=b,this.bodyPoint1.y*=b,this.alreadyScaled=!0}})})},"frozen/sounds/WebAudio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(b,c,f){var j=null;window.AudioContext&&(j=new window.AudioContext);return b(null,{declaredClass:"frozen/sounds/WebAudio",name:null,
complete:!1,audioContext:j,buffer:null,constructor:function(b){"string"===typeof b&&this.load(b)},load:function(b){this.name=b;var i=f.partial(function(b){b.audioContext.decodeAudioData(this.response,function(c){b.buffer=c;b.complete=!0},function(){})},this),d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";c(d,"load",i);d.send()},loop:function(b){this._initAudio(b,!0).noteOn(0)},play:function(b,c){this._initAudio(b,!1).noteOn(c||0)},_initAudio:function(b,c){var c="boolean"===typeof c?
c:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;d.loop=c;if(b){var f=this.audioContext.createGainNode();f.gain.value=b;d.connect(f);f.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/sounds/HTML5Audio":function(){define(["dcl","dojo/on","dojo/_base/lang"],function(b,c,f){return b(null,{declaredClass:"frozen/sounds/HTML5Audio",name:null,complete:!1,audio:null,constructor:function(b){this.audio=new Audio;"string"===typeof b&&
this.load(b)},load:function(b){this.name=b;this.audio.pause();this.audio.preload="auto";this.audio.src=b;c(this.audio,"loadeddata",f.hitch(this,function(){this.complete=!0}))},loop:function(b){var f=this._initAudio(b,!0);c(f,"loadeddata",function(){f.play()})},play:function(b,f){var f=f||0,i=this._initAudio(b,!1);c(i,"loadeddata",function(){i.currentTime=f/1E3;i.play()})},_initAudio:function(b,c){var c="boolean"===typeof c?c:!1,f=new Audio;f.pause();f.volume=b||1;f.loop=c;f.preload="auto";f.mozLoadFrom?
f.mozLoadFrom(this.audio):f.src=this.name;return f}})})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();